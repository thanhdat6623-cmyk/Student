#include <main.h>
unsigned int digit,digit1,digit10,digit100;
unsigned int8 n=4;
#int_timer0
void Ngat_timer0(void)
{
   set_timer0(100);
  if (!input(PIN_D0)) {
         while(input(PIN_D0)==0){
          
        } 
        n++;
      }

        if (!input(PIN_D1)) {
          while(input(PIN_D1) ==0){ }
           n--;
            }
         if (n >999) {
            n =0;
        }
       
}
unsigned int seg(unsigned int num){
   switch(num){
      case 0 : 
         return 0xC0;
         break;
      case 1 : 
         return 0xF9; 
         break;
      case 2 : 
         return 0xA4; 
         break;
      case 3 : 
         return 0xB0; 
         break;
      case 4 : 
         return 0x99; 
         break;
      case 5 : 
         return 0x92; 
         break;
      case 6 : 
         return 0x82; 
         break;
      case 7 : 
         return 0xF8; 
         break;
      case 8 : 
         return 0x80; 
         break;
      case 9 : 
         return 0x90; 
         break;
   }
}
void hienso(unsigned int so){
   output_c(0x01);
   digit=so%10;
   printf("%d",digit);
   digit1=seg(digit);
   output_b(digit1);
   delay_ms(10);
   output_b(0xff);
   output_c(0x02);
   digit=(so/10)%10;
   digit10=seg(digit);
   output_b(digit10);
   delay_ms(10);
   output_c(0x04);
   digit=(so/100)%10;
   digit100=seg(digit);
   output_b(digit100);
   delay_ms(10);
   output_b(0xff);
}
void main()
{

   set_tris_D(0xff);
   setup_timer_0(RTCC_INTERNAL|RTCC_DIV_4);
   set_timer0(100);
   enable_interrupts(int_timer0);
   enable_interrupts(global);
   while(TRUE)
   {
       hienso(n);
       
    }
}

